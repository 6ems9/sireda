const settings={administrasi:0,formulir:0,shst_sederhana:45e5,shst_tidak_sederhana:45e5,indeks_lokalitas:.5},parameters=["kompleksitas","permanensi","ketinggian"],indeks={fungsi:[{name:"Hunian (< 100 m2 dan < 2 lantai)",index:"0.15"},{name:"Hunian (> 100 m2 dan > 2 lantai)",index:"0.17"},{name:"Keagamaan",index:"0"},{name:"Usaha",index:"0.7"},{name:"Usaha UMKM",index:"0.5"},{name:"Sosial & Budaya",index:"0.3"},{name:"Khusus",index:"1"},{name:"Ganda/Campuran (≤ 500 m2 dan ≤ 2 lantai)",index:"0.6"},{name:"Ganda/Campuran (> 500 m2 dan > 2 lantai)",index:"0.8"}],kepemilikan:[{name:"Perorangan/Badan Usaha",index:"1"},{name:"Negara",index:"0"}],kompleksitas:[{name:"Sederhana",index:"1"},{name:"Tidak Sederhana",index:"2"}],permanensi:[{name:"Non Permanen",index:"1"},{name:"Permanen",index:"2"}],ketinggian:[{name:"1 Lantai",index:"1"},{name:"2 Lantai",index:"1.09"},{name:"3 Lantai",index:"1.12"},{name:"4 Lantai",index:"1.135"},{name:"5 Lantai",index:"1.162"},{name:"6 Lantai",index:"1.197"},{name:"7 Lantai",index:"1.236"},{name:"8 Lantai",index:"1.265"},{name:"9 Lantai",index:"1.299"},{name:"10 Lantai",index:"1.333"},{name:"11 Lantai",index:"1.364"},{name:"12 Lantai",index:"1.393"},{name:"13 Lantai",index:"1.42"},{name:"14 Lantai",index:"1.445"},{name:"15 Lantai",index:"1.468"},{name:"16 Lantai",index:"1.489"},{name:"17 Lantai",index:"1.508"},{name:"18 Lantai",index:"1.525"},{name:"19 Lantai",index:"1.541"},{name:"20 Lantai",index:"1.556"},{name:"21 Lantai",index:"1.57"},{name:"22 Lantai",index:"1.584"},{name:"23 Lantai",index:"1.597"},{name:"24 Lantai",index:"1.61"},{name:"25 Lantai",index:"1.622"},{name:"26 Lantai",index:"1.634"},{name:"27 Lantai",index:"1.645"},{name:"28 Lantai",index:"1.656"},{name:"29 Lantai",index:"1.666"},{name:"30 Lantai",index:"1.676"},{name:"31 Lantai",index:"1.686"},{name:"32 Lantai",index:"1.695"},{name:"33 Lantai",index:"1.704"},{name:"34 Lantai",index:"1.713"},{name:"35 Lantai",index:"1.722"},{name:"36 Lantai",index:"1.73"},{name:"37 Lantai",index:"1.738"},{name:"38 Lantai",index:"1.746"},{name:"39 Lantai",index:"1.754"},{name:"40 Lantai",index:"1.761"},{name:"41 Lantai",index:"1.768"},{name:"42 Lantai",index:"1.775"},{name:"43 Lantai",index:"1.782"},{name:"44 Lantai",index:"1.789"},{name:"45 Lantai",index:"1.795"},{name:"46 Lantai",index:"1.801"},{name:"47 Lantai",index:"1.807"},{name:"48 Lantai",index:"1.813"},{name:"49 Lantai",index:"1.818"},{name:"50 Lantai",index:"1.823"},{name:"51 Lantai",index:"1.828"},{name:"52 Lantai",index:"1.833"},{name:"53 Lantai",index:"1.837"},{name:"54 Lantai",index:"1.841"},{name:"55 Lantai",index:"1.845"},{name:"56 Lantai",index:"1.849"},{name:"57 Lantai",index:"1.853"},{name:"58 Lantai",index:"1.856"},{name:"59 Lantai",index:"1.859"},{name:"60 Lantai",index:"1.862"}]},ucwords=a=>a.toLowerCase().replace(/\b[a-z]/g,function(a){return a.toUpperCase()}),comma2dot=a=>(a=(a||"0,00").toString()).indexOf(",")>-1?a.replace(",",".").replace(" ",""):a,dot2comma=a=>(a=(a||"0.00").toString()).indexOf(".")>-1?a.replace(".",",").replace(" ",""):a,olihke$=a=>{let n=$(a).val();return n=comma2dot(n),parseFloat(n)},rupiah=(a,n="Rp. ")=>{let e=a.toString().replace(/[^,\d]/g,"").toString().split(","),i=e[0].length%3,t=e[0].substr(0,i),d=e[0].substr(i).match(/\d{3}/gi);return d&&(t+=(pemedot=i?".":"")+d.join(".")),t=void 0!=e[1]?t+","+e[1]:t,void 0==n?t:t?"Rp. "+t:""};function wis_ngitungo(){try{let a=$("#luas-bangunan").val(),n=Object.keys(indeks).filter(a=>!parameters.includes(a)),e=0;for(kuncine_parameter in parameters){let i="#index"+ucwords(parameters[kuncine_parameter]),t=olihke$(i),d="#index_"+parameters[kuncine_parameter];$(d).html(t);let m="#bobot"+ucwords(parameters[kuncine_parameter]),s=$(m).text(),o=t*s,r="#hasil_index_"+parameters[kuncine_parameter];$(r).html(o),e+=o}e=parseFloat(e).toFixed(2),$("#jumlah_klasifikasi").html(e);let _=1;for(kie_kunci in n){let l="#index"+ucwords(n[kie_kunci]),x=olihke$(l);$("#index_"+n[kie_kunci]).html(x),$("#hasil_index_"+n[kie_kunci]).html(x),_*=x}_=parseFloat(_).toFixed(2);let u=e*_;u=parseFloat(u).toFixed(2),$("#index_terintegrasi").html(u);let h=0;h=2==$("#indexKompleksitas").val()?settings.shst_tidak_sederhana:settings.shst_sederhana,h=parseFloat(h).toFixed(2),$("#nilai_shst").html(rupiah(dot2comma(h)));let L=$("#indeksKegiatan").val(),c=a*(settings.indeks_lokalitas/100*h)*u*L;c=parseFloat(c).toFixed(2),$("#jumlah_retribusi").html(rupiah(dot2comma(c)));let p=0;$(".jumlah-bangunan").each(function(){let a=$(this).data("harga"),n=$(this).val();p+=a*n}),p=parseFloat(p).toFixed(2),$("#total_hspbg").html(rupiah(dot2comma(p)));let g=parseFloat(c);g+=parseFloat(p),g+=settings.administrasi,g+=settings.formulir,g=parseFloat(g).toFixed(2),$("#total_retribusi").html(rupiah(dot2comma(g)))}catch(k){console.error(k)}}$(document).ready(function(){for(isine_param in $.scrollUp({scrollText:'<i class="fas fa-chevron-up"></i>',easingType:"linear",scrollSpeed:900,animation:"fade"}),$('input[type="number"]').on("change keyup keydown cut copy paste",function(){let a=$(this).attr("max"),n=$(this).attr("min"),e=$(this).val(),i=Number(e);if(""==e.trim()&&$(this).val("0"),void 0!==a&&!1!==a){let t=Number(a);i>t&&$(this).val(t)}if(void 0!==n&&!1!==n){let d=Number(n);i<d&&$(this).val(d)}}),indeks){let a=indeks[isine_param],n="#index"+ucwords(isine_param);for(opsi in a){let e=a[opsi];$(n).append($("<option />").val(e.index).text(e.name))}}$(document).on("change keyup keydown cut copy paste","#luas-bangunan",wis_ngitungo),$(document).on("change","select",wis_ngitungo),$(document).on("change keyup keydown cut copy paste",".jumlah-bangunan",wis_ngitungo)}),$(window).scroll(function(){$(this).scrollTop()>20?$("#navbar").addClass("header-scrolled"):$("#navbar").removeClass("header-scrolled")}),$(window).on("load",function(){$("#dvLoading").fadeOut("slow",function(){$(this).remove()})}),$(window).on("load resize",function(){992>$(window).width()&&$("#navbar .nav-item").on("click",function(){$(".navbar-toggler").trigger("click")})});